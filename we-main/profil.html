<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil – Beatles Fan</title>
    <link rel="stylesheet" href="style.css">
    <style>
        main { padding: 40px 20px; max-width: 1100px; margin: 0 auto; }
        h2, h3 { color: #fff; }
        #profileInfo { background:#111; padding:20px; border-radius:12px; margin-bottom:40px; }
        .fav-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:20px; margin-top:20px; }
        .fav-item { background:#111; padding:18px; border-radius:12px; display:flex; gap:18px; align-items:center; border-left:4px solid #0f0; }
        .fav-item img { width:70px; height:70px; border-radius:50%; object-fit:cover; }
        .no-fav { color:#666; font-style:italic; text-align:center; padding:30px; }
    </style>
</head>
<body>

<header>
    <nav class="navbar">
        <a href="index.html"><img src="images/logo.png" alt="Logo"></a>
        <ul id="navMenu">
            <li><a href="index.html">HOME</a></li>
            <li><a href="albums.html">ALBUMS</a></li>
            <li><a href="members.html">MEMBERS</a></li>
            <li><a href="quotes.html">QUOTES</a></li>
            <li id="authLink"><a href="login.html">Login</a></li>
        </ul>
        <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
    </nav>
</header>

<main>
    <h2>Tvoj Profil</h2>
    <div id="profileInfo"></div>

    <h3>Lajkane pjesme</h3>
    <div id="likedSongs" class="fav-grid"></div>

    <h3>Lajkani albumi</h3>
    <div id="likedAlbums" class="fav-grid"></div>

    <h3>Lajkani citati</h3>
    <div id="likedQuotes" class="fav-grid"></div>

    <h3>Moji komentari</h3>
    <div id="mojiKomentari" class="fav-grid"></div>
</main>

<footer><p>2025 The Beatles | All rights reserved ©</p></footer>

<script src="js/profil.js"></script>
<script src="js/profil.js"></script>
<script>
    // Hamburger
    document.getElementById('hamburger').onclick = () => {
        document.getElementById('hamburger').classList.toggle('active');
        document.querySelector('.navbar ul').classList.toggle('active');
    };

    // JEDINSTVENA FUNKCIJA ZA SVE STRANICE – sada radi i na profilu
    function updateNav() {
        const user = JSON.parse(localStorage.getItem('user'));
        const authLink = document.getElementById('authLink');

        if (user) {
            authLink.innerHTML = `
                <div style="position:relative;display:inline-block;">
                    <a href="#" style="color:#0f0;font-weight:bold;text-decoration:none;">
                        ${user.ime} ▼
                    </a>
                    <div id="userDropdown" style="display:none;position:absolute;right:0;top:40px;background:#222;padding:15px;border-radius:10px;min-width:180px;z-index:9999;box-shadow:0 8px 30px rgba(0,0,0,0.9);">
                        <a href="profil.html" style="color:#fff;display:block;padding:10px 0;text-decoration:none;border-bottom:1px solid #444;">Profil</a>
                        ${user.uloga === 'admin' ? '<a href="admin.html" style="color:#0f0;display:block;padding:10px 0;font-weight:bold;text-decoration:none;">Admin panel</a>' : ''}
                        <a href="#" onclick="logout()" style="color:#ff6b6b;display:block;padding:10px 0;text-decoration:none;">Odjava</a>
                    </div>
                </div>
            `;

            // Klik na ime otvara dropdown
            authLink.querySelector('a').onclick = function(e) {
                e.preventDefault();
                const menu = document.getElementById('userDropdown');
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            };
        } else {
            authLink.innerHTML = '<a href="login.html">Login</a>';
            location.href = 'login.html';
        }
    }

    function logout() {
        localStorage.removeItem('user');
        location.href = 'index.html';
    }

    // Zatvaranje dropdowna kad klikneš van
    document.addEventListener('click', function(e) {
        const dropdown = document.getElementById('userDropdown');
        if (dropdown && !e.target.closest('#authLink')) {
            dropdown.style.display = 'none';
        }
    });

    // Pokreni odmah
    updateNav();
</script>
</body>
</html>